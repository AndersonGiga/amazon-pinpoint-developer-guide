# Querying Amazon Pinpoint Analytics Data<a name="analytics"></a>

In addition to using the analytics pages on the Amazon Pinpoint console, you can use Amazon Pinpoint Analytics APIs to query analytics data for a subset of standard metrics that provide insight into trends related to user engagement, campaign outreach, and more\. These metrics, also referred to as *key performance indicators \(KPIs\)*, are measurable values that can help you monitor and assess the performance of your projects and campaigns\.

If you use the APIs to query analytics data, you can analyze the data by using the reporting tool of your choice, without having to sign in to the Amazon Pinpoint console or analyze raw event data from sources such as Amazon Kinesis streams\. For example, you can build a custom dashboard that displays weekly campaign results or provides in\-depth analytics about delivery rates for your campaigns\.

You can query the data by using the Amazon Pinpoint REST API, the AWS Command Line Interface \(AWS CLI\), or an AWS SDK\. To query the data, you send a request to the Amazon Pinpoint API and use supported parameters to specify the data that you want and any filters that you want to apply\. After you submit your query, Amazon Pinpoint returns the query results in a JSON response\. You can then pass the results to another service or application for deeper analysis, storage, or reporting\.

## Supported Metrics<a name="analytics-supported-metrics"></a>

Amazon Pinpoint provides programmatic access to analytics data for two types of standard metrics:
+ **Application metrics** – These metrics provide insight into trends for all the campaigns and transactional messages that are associated with a project\. For example, you can use an application metric to get a breakdown of the number of messages that were opened by recipients for each campaign that's associated with a project\. To access the data for an application metric, use the [Application Metrics](https://docs.aws.amazon.com/pinpoint/latest/apireference/apps-application-id-kpis-daterange-kpi-name.html) resource of the Amazon Pinpoint API\.
+ **Campaign metrics** – These metrics provide insight into the performance of individual campaigns\. For example, you can use a campaign metric to determine how many endpoints a campaign message was sent to\. To access the data for a campaign metric, use the [Campaign Metrics](https://docs.aws.amazon.com/pinpoint/latest/apireference/apps-application-id-campaigns-campaign-id-kpis-daterange-kpi-name.html) resource of the Amazon Pinpoint API\.

For a complete list of standard metrics that you can query programmatically, see [Standard Amazon Pinpoint Analytics Metrics](analytics-standard-metrics.md)\.

Amazon Pinpoint automatically collects and aggregates data for all supported metrics, for all of your projects and campaigns\. In addition, the data is updated continuously, resulting in a data latency time frame that’s limited to approximately two hours\. Amazon Pinpoint stores the data for 90 days\. To store the data for more than 90 days or to access raw analytics data in real time, you can configure an Amazon Pinpoint project to stream event data to Amazon Kinesis Data Streams or Amazon Kinesis Data Firehose\. For information about configuring event streams, see [Streaming Amazon Pinpoint Events to Kinesis](event-streams.md)\.

## Query Basics<a name="analytics-query-basics"></a>

To query the data for a metric, you send a `get` request to the appropriate metrics resource of the Amazon Pinpoint API—Application Metrics, for metrics that apply to all the campaigns or transactional messages that are associated with a project, or Campaign Metrics, for metrics that apply to individual campaigns\. In your request, you define your query by using supported parameters for the following query components:
+ **Project** – Specify a project by providing the project ID as the value for the `application-id` parameter\. This parameter is required for all metrics\.
+ **Campaign** – Specify a campaign by providing the campaign ID as the value for the `campaign-id` parameter\. This parameter is required only for campaign metrics\.
+ **Date range** – To optionally filter the data by date range, provide the first and last date and time of the date range by using supported start and end time parameters\. The values should be in extended ISO 8601 format and use Coordinated Universal Time \(UTC\)—for example, `2019-07-19T20:00:00Z` for 8:00 PM UTC July 19, 2019\. Date ranges are inclusive and must be limited to 31 or fewer calendar days\. If you don’t specify a date range, Amazon Pinpoint returns the data for the preceding 31 calendar days\.
+ **Metric** – Specify the metric by providing the name of the metric as the value for the `kpi-name` parameter\. This value describes the associated metric and consists of two or more terms, which are comprised of lowercase alphanumeric characters, separated by a hyphen\. Examples are `email-open-rate` and `successful-delivery-rate`\. This parameter is required for all metrics\. For a complete list of supported metrics and the `kpi-name` value to use for each one, see [Standard Amazon Pinpoint Analytics Metrics](analytics-standard-metrics.md)\.

After you send your query, Amazon Pinpoint returns the query results in a JSON response\. In the response, the structure of the results varies depending on the metric that you queried\. Some metrics provide only one value—for example, the number of messages that were delivered by a campaign\. Other metrics provide multiple values and those values are grouped by a relevant field—for example, the number of messages that were delivered by each run of a campaign, grouped by campaign run\. If a metric provides multiple values, the JSON response includes a field that indicates which field was used to group the data\. To learn more about the structure of query results, see [Using Query Results](analytics-query-results.md)\.